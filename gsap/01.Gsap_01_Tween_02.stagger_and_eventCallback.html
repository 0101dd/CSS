<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.css' />

  <title>Document</title>
  <style>
    body {
      padding-bottom: 200px;
    }

    h3,
    h4 {
      margin-bottom: 20px;
    }

    .wrap {
      width: 600px;
      height: 300px;
      display: flex;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .box1,
    .box2,
    .box3,
    .box4,
    .box5,
    .box6,
    .box7 {
      width: 50px;
      height: 50px;
      margin: 5px;
      background: #000;
    }
  </style>

</head>

<body>
  <div class="container">
    <h3>10. Stagger 交錯效果</h3>
    <h4>基礎設定</h4>
    <div class="wrap">
      <div class="box1"></div>
      <div class="box1"></div>
      <div class="box1"></div>
      <div class="box1"></div>
      <div class="box1"></div>
      <div class="box1"></div>
      <div class="box1"></div>
      <div class="box1"></div>
      <div class="box1"></div>
      <div class="box1"></div>
    </div>

    <h4>列、欄交錯設定</h4>
    <div class="wrap">
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
      <div class="box2"></div>
    </div>

    <h4>axis 軸交錯設定</h4>
    <div class="wrap">
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
      <div class="box3"></div>
    </div>

    <h4>stagger function</h4>
    <div class="wrap">
      <div class="box4"></div>
      <div class="box4"></div>
      <div class="box4"></div>
      <div class="box4"></div>
      <div class="box4"></div>
      <div class="box4"></div>
      <div class="box4"></div>
      <div class="box4"></div>
      <div class="box4"></div>
      <div class="box4"></div>
    </div>
  </div>

  <hr>

  <h3>11. 動畫狀態與事件函式</h3>
  <div class="box5"></div>
  <div class="progress mb-3">
    <div class="progress-bar"></div>
  </div>
  <button id="btn1">play 播放</button>
  <button id="btn2">paused 暫停狀態</button>
  <button id="btn3">reversed 暫停狀態</button>

  <hr>

  <h3>12. gsap.from() 與 gsap.fromTo()</h3>
  <p>除了 gsap.to() 還有 gsap.from() 與 gsap.fromTo() 來建立補間動畫 tween。</p>

  <h4>gsap.from()</h4>
  <p>指定補間動畫從 設定狀態 到 目前狀態，例如:使用在進場動畫。</p>
  <div class="box6"></div>

  <h4>gsap.fromTo()</h4>
  <p>指定補間動畫從 from設定狀態1 到 to設定狀狀態2。（少用，會增加不少程式碼）</p>
  <div class="box7"></div>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js'></script>
  <!-- gsap 主程式 -->
  <script src="./js/gsap.js"></script>
  <script>
    // 10. Stagger 交錯效果 ---------------------------------------------------------------------------------------
    const tween1 = gsap.to('.box1', {
      y: 100,
      delay: 1,
      duration: 3,
      stagger: 0.1, // 每個元素動畫交錯的時間，可以只設定數值，或使用物件寫法
      stagger: {
        each: 0.1, // 每個元素動畫交錯的時間
        // amount: 10, // 設定一個總時間分配給元素
        from: 'edges', // 從第幾個 index 開始(0 開始)散開交錯，或設定關鍵字 'start'、''end、'center'、'random'、'edges'
        repeat: -1,
        yoyo: true
      },
      ease: 'none',
      repeat: -1,
      yoyo: true
    })

    // 列、欄交錯設定
    const tween2 = gsap.to('.box2', {
      rotation: 360,
      stagger: {
        each: 0.5,
        grid: [1, 10], // 陣列[列,欄]，設定列欄交錯(範例 1 列、10 欄，從中間開始散開交錯)
        from: 'center',
      },
      duration: 1,
      ease: 'none'
    })

    // axis 軸交錯設定
    const tween3 = gsap.to('.box3', {
      scale: 0.1,
      stagger: {
        each: 0.1,
        from: 'center',
        grid: 'auto',
        axis: 'x', // 以軸單位交錯，'x' 或 'y'
        yoyo: true,
        repeat: -1
      },
      duration: 1,
      ease: 'none'
    })

    // stagger function
    // 可以在裡面自訂邏輯用於偏移量的分配，每個元素會呼叫一次該函式，最後要返回偏移量值
    const tween4 = gsap.to('.box4', {
      background: 'red',
      y: 100,
      repeat: 1,
      yoyo: true,
      stagger: function (index, target, targets) {
        // console.log(index, target, targets)
        let gap = 0.5
        if (index % 2 == 0) {
          gap = 0.2
        } else {
          gsp = 0.5
        }
        return gap * index
      }
    })

    // 11. 動畫狀態與事件函式 ---------------------------------------------------------------------------
    const tween5 = gsap.to('.box5', {
      x: '80vw',
      duration: 5,
      yoyo: true,
      paused: true, // 補間動畫 tween 是否為暫停狀態
      reversed: false, // 補間動畫 tween 是否為反轉狀態
      ease: 'none',
      // 當動畫開始時
      onStart: function (param1, param2) {
        console.log(param1, param2)
        // this 指向 tween 自己
        console.log(this)
        // 指向目前存放演員的陣列
        console.log(this.targets())
      },
      onStartParams: ['動畫開始了', 'Kaifu'],
      // 當動畫結束時
      onComplete: myComplete,
      onCompleteParams: ['動畫結束了', 'Kaifu'],
      // 當動畫持續進行更新時
      onUpdate(param1, param2) {
        console.log(param1, param2)
        console.log(this.progress())
        $('.progress-bar').css({
          width: `${this.progress() * 100}%`
        })
      },
      onUpdateParams: ['動畫更新中', 'Kaifu'],

    })

    function myComplete(param1, param2) {
      console.log(param1, param2)
    }

    // 正向播放
    $('#btn1').on('click', function () {
      tween5.play() // 正向播放
      console.log('reversed 狀態' + tween5.reversed())
    })
    // 暫停狀態
    $('#btn2').on('click', function () {
      // tween5.pause()
      tween5.paused(!(tween5.paused()))
      console.log('paused 狀態： ' + tween5.paused())
    })
    // 反轉狀態
    $('#btn3').on('click', function () {
      // tween5.reverse() // 反向播放
      tween5.reversed(!(tween5.reversed())) // 若反轉狀態為 true，則是 false，反之為 flase，則是 true
      console.log('reversed 狀態： ' + tween5.reversed())
    })

    // 12. gsap.from() 與 gsap.fromTo() ----------------------------------------------------------------------------
    // gsap.from()
    gsap.from('.box6', {
      x: -500,
      duration: 1,
      ease: 'elastic'
    })
    // gsap.fromTo()
    gsap.fromTo('.box7',
      {
        x: 1000,
      },
      {
        x: 100,
        delay: 1, // delay、duration 要設定在第二組
        duration: 3
      }
    )
  </script>
</body>

</html>